# application-prod.properties - Use this for Render deployment
# Database configuration
spring.data.mongodb.uri=${MONGODB_URI:mongodb+srv://JOUJOU:1234@recipedb.npihwk6.mongodb.net/recipeDB}

# Server configuration
server.port=${PORT:8080}
server.tomcat.relaxed-query-chars=[,]

# JWT configuration
jwt.secret=${JWT_SECRET:V9BYt3P7unN2yzAMwsH5gK8D6fJqEcXr4Z7LxGhQjTkFbRdCvU3mWnS2pE9YzAq5BgK8D4fH7jLmN6P2rTvUxXyZaEcRfVgBhJkMnPqRsTuVwXyZ}

# Logging configuration (minimal for production)
logging.level.root=WARN
logging.level.org.springframework=INFO
logging.level.com.recipemanagement=INFO

# OpenAPI/Swagger configuration
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.packages-to-scan=com.recipemanagement.controller

# Security configuration
spring.security.filter.dispatcher-types=REQUEST,ASYNC,ERROR

# Spring configuration - avoid circular references
spring.main.allow-circular-references=false
spring.main.allow-bean-definition-overriding=true

# Error handling configuration - CRITICAL FIX
server.error.whitelabel.enabled=false
server.error.path=/error
server.error.include-message=always
server.error.include-stacktrace=never
server.error.include-exception=false

# Static resources configuration
spring.mvc.throw-exception-if-no-handler-found=false
spring.web.resources.add-mappings=true

# Actuator endpoints
management.endpoint.health.probes.enabled=true
management.health.livenessstate.enabled=true
management.health.readinessstate.enabled=true
management.endpoints.web.exposure.include=health,info
management.endpoints.web.base-path=/actuator

# Request/response handling
spring.mvc.async.request-timeout=30000
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.enabled=true
server.servlet.encoding.force=true

# Disable dev tools in production
spring.devtools.add-properties=false
spring.devtools.restart.enabled=false

# Debug mode - set to false in production
debug=false